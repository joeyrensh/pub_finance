import requests
import math
from lxml import html
import random
import logging
import sys
import uuid
import json
import time
import pandas as pd
from utility.toolkit import ToolKit

logging.basicConfig(
    stream=sys.stdout,
    level=logging.INFO,
    format="%(asctime)s - %(levelname)s - %(message)s",
)
logger = logging.getLogger(__name__)

# https://www.useragents.me/#most-common-desktop-useragents-json-csv 获取最新user agent
user_agent_list = [
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.3",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.3",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.3",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:129.0) Gecko/20100101 Firefox/129.",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 OPR/112.0.0.",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36 Edg/127.0.0.",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36 Edg/124.0.0.",
    "Mozilla/5.0 (X11; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/113.",
    "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:129.0) Gecko/20100101 Firefox/129.",
    "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.3",
    "Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.14"
    "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.10",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.3",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36",
]

headers = {
    "User-Agent": random.choice(user_agent_list),
    "Referer": "sh.ke.com",
    "Host": "sh.ke.com",
    "Connection": "keep-alive",
    "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
    "Accept-encoding": "gzip, deflate, br, zstd",
    "Accept-language": "zh-CN,zh;q=0.9",
    "Cookie": ("ke_uuid=%s;") % (uuid.uuid4()),
}


def check_proxy_anonymity(url, headers, proxy):
    try:
        s = requests.Session()
        s.proxies = proxy
        s.headers.update(headers)
        response = s.get(url, timeout=3)
        if response.status_code == 200:
            tree = html.fromstring(response.content)
            div = tree.xpath(
                '//div[@class="xiaoquListPage"]/div[@class="content"]/div[@class="leftContent"]/div[@class="resultDes clear"]/h2[@class="total fl"]/span'
            )
            if div:
                cnt = div[0].text_content().strip()
                page_no = math.ceil(int(cnt) / 30)
                print("当前获取房源量为%s,总页数为%s" % (cnt, page_no))
                print("proxy %s有效" % (proxy))
                return True
            else:
                print("proxy无效")
                return False
        else:
            print(f"Failed to retrieve data: {response.status_code}")
            return False

    except requests.exceptions.RequestException as e:
        print(f"{proxy}: {e}")
        return False
    except Exception as e:
        print(f"发生了未知错误: {e}")
        return False


# ZDY: https://api.openproxylist.xyz/http.txt
def get_proxies_listv1(url):
    proxy_url = "https://api.openproxylist.xyz/http.txt"
    count = 0
    dlist = []
    target = 1
    while count < target:
        s = requests.session()
        response = s.get(proxy_url, timeout=3)
        if response.status_code == 200:
            proxy_list = [
                "http://" + proxy
                for proxy in response.content.decode("utf-8").strip().split("\n")
            ]
            for item in proxy_list:
                proxy = {"https": item, "http": item}
                # proxy = {"https": item}
                if check_proxy_anonymity(url, headers, proxy):
                    dlist.append(item)
                    count = count + 1
                if count == target:
                    break
            break
        else:
            print("proxy get failed..")
            break
    print(dlist)


# https://getproxy.bzpl.tech/get/
def get_proxies_listv2(url):
    proxy_url = "https://getproxy.bzpl.tech/get/"
    count = 0
    dlist = []
    target = 1
    while count < target:
        s = requests.session()
        time.sleep(random.randint(1, 3))  # 随机休眠
        response = s.get(proxy_url, timeout=3)
        if response.status_code == 200:
            json_str = response.content.decode("utf-8")
            json_data = json.loads(json_str)
            proxy = {
                "https": "http://" + json_data["proxy"],
                "http": "http://" + json_data["proxy"],
            }
            if check_proxy_anonymity(url, headers, proxy):
                dlist.append("http://" + json_data["proxy"])
                count = count + 1
    print(dlist)


# 使用示例
# proxyscrape.com免费proxy: https://api.proxyscrape.com/v3/free-proxy-list/get?request=displayproxies&country=cn&protocol=http&proxy_format=protocolipport&format=text&anonymity=Elite,Anonymous&timeout=3000
# 站大爷免费proxy: https://www.zdaye.com/free/?ip=&adr=&checktime=&sleep=3&cunhuo=&dengji=&nadr=&https=1&yys=&post=&px=


def get_proxies_listv3(proxies_list, url):
    dlist = []
    t1 = ToolKit("检验中......")
    df = pd.read_csv("./houseinfo/proxies.csv", names=["proxy"], comment="#")
    pre_proxies = df["proxy"].tolist()
    for idx, item in enumerate(proxies_list):
        proxy = {"https": item, "http": item}
        if check_proxy_anonymity(url, headers, proxy):
            if item not in pre_proxies:
                print("item: %s" % (item))
                df_result = pd.DataFrame([item])
                df_result.to_csv(
                    "./houseinfo/proxies.csv", mode="a", header=False, index=False
                )
                pre_proxies.append(item)
                dlist.append(item)
        t1.progress_bar(len(proxies_list), idx)

    print(dlist)


# url = "http://sh.lianjia.com/xiaoqu/xuhui/pgpgnobp0ep100/"
url = "http://sh.ke.com/xiaoqu/xuhui/pg1cro21/"
proxies_list = [
    "http://136.226.194.151:9480",
    "http://38.242.245.172:3128",
    "http://146.70.158.86:3128",
    "http://85.209.195.77:8080",
    "http://165.155.228.14:9480",
    "http://165.155.228.13:9400",
    "http://165.155.228.11:9480",
    "http://165.155.228.9:9480",
    "http://178.48.68.61:18080",
    "http://165.155.229.13:9480",
    "http://165.155.228.8:9400",
    "http://165.155.228.8:9480",
    "http://165.155.230.12:9480",
    "http://165.155.230.10:9480",
    "http://165.155.228.18:9480",
    "http://165.155.228.16:9400",
    "http://165.155.230.13:9480",
    "http://165.155.230.10:9400",
    "http://165.155.229.9:9480",
    "http://165.155.230.9:9400",
    "http://165.155.228.12:9480",
    "http://165.155.230.8:9400",
    "http://165.155.229.11:9480",
    "http://165.155.230.9:9480",
    "http://165.155.228.10:9400",
    "http://165.155.229.10:9480",
    "http://165.155.228.10:9480",
    "http://165.155.228.12:9400",
    "http://165.155.229.12:9400",
    "http://165.155.229.13:9400",
    "http://165.155.228.14:9400",
    "http://165.155.230.8:9480",
    "http://165.155.229.10:9400",
    "http://165.155.230.11:9480",
    "http://165.155.229.9:9400",
    "http://165.155.230.11:9400",
    "http://165.155.228.16:9480",
    "http://165.155.229.11:9400",
    "http://144.86.187.59:3129",
    "http://216.173.71.126:3128",
    "http://165.155.228.15:9480",
    "http://165.155.228.18:9400",
    "http://165.155.228.9:9400",
    "http://185.253.32.26:8080",
    "http://80.240.55.242:3128",
    "http://72.10.160.93:30205",
    "http://165.155.228.11:9400",
    "http://194.68.171.247:3128",
    "http://206.189.135.6:3128",
    "http://165.155.228.13:9480",
    "http://8.219.97.248:80",
    "http://209.121.164.50:31147",
    "http://72.10.164.178:27165",
    "http://165.155.230.13:9400",
    "http://38.41.5.85:999",
    "http://72.10.160.170:3015",
    "http://165.155.230.12:9400",
    "http://72.10.164.178:20061",
    "http://77.242.98.39:8080",
    "http://152.42.186.41:9090",
    "http://67.43.228.253:27345",
    "http://152.42.170.187:9090",
    "http://146.190.80.158:9090",
    "http://72.10.160.170:1327",
    "http://165.155.229.8:9480",
    "http://94.130.177.190:9999",
    "http://72.10.164.178:19765",
    "http://72.10.164.178:4631",
    "http://128.199.119.67:9090",
    "http://67.43.228.254:10869",
    "http://67.43.236.20:17551",
    "http://72.10.160.170:13001",
    "http://218.60.0.220:80",
    "http://72.10.160.90:14719",
    "http://94.247.129.244:3128",
    "http://67.43.227.226:4397",
    "http://128.199.118.49:9090",
    "http://72.10.160.173:29787",
    "http://67.43.227.226:11835",
    "http://67.43.227.228:21255",
    "http://67.43.227.228:7945",
    "http://160.86.242.23:8080",
    "http://177.139.195.10:3128",
    "http://87.107.48.254:3128",
    "http://39.152.55.125:1080",
    "http://67.43.227.228:26839",
    "http://122.222.186.86:8080",
    "http://72.10.164.178:23797",
    "http://189.232.97.26:8080",
    "http://72.10.160.94:20299",
    "http://67.43.236.20:32951",
    "http://67.43.227.228:26565",
    "http://67.43.227.226:1801",
    "http://212.123.230.250:8181",
    "http://114.236.93.208:19088",
    "http://109.230.92.50:3128",
    "http://152.70.235.185:9002",
    "http://150.136.153.231:80",
    "http://67.43.228.253:4923",
    "http://67.43.227.227:1221",
    "http://67.43.227.228:1613",
    "http://67.43.227.227:23269",
    "http://88.248.113.25:3310",
    "http://38.191.200.72:999",
    "http://72.10.160.94:3395",
    "http://78.189.212.252:3310",
    "http://189.125.109.66:3128",
    "http://72.10.160.90:11779",
    "http://123.126.158.50:80",
    "http://72.10.160.170:1259",
    "http://128.199.121.61:9090",
    "http://67.43.236.20:23429",
    "http://78.188.230.238:3310",
    "http://72.10.160.90:8861",
    "http://78.187.15.92:3310",
    "http://91.203.242.66:222",
    "http://116.202.113.187:60467",
    "http://72.10.160.92:21591",
    "http://72.10.160.174:17281",
    "http://91.200.163.190:8088",
    "http://119.47.90.228:3127",
    "http://114.129.2.82:8080",
    "http://79.106.108.150:8079",
    "http://67.43.227.226:8687",
    "http://67.43.228.253:15945",
    "http://72.10.164.178:2659",
    "http://116.202.113.187:60264",
    "http://121.41.67.116:8080",
    "http://72.10.164.178:1317",
    "http://72.10.160.91:23285",
    "http://116.202.113.187:60793",
    "http://88.225.212.143:3310",
    "http://67.43.227.228:14375",
    "http://67.43.228.253:11697",
    "http://148.113.1.131:3128",
    "http://185.116.236.104:9595",
    "http://27.147.140.129:58080",
    "http://35.73.28.87:3128",
    "http://72.10.164.178:8511",
    "http://193.233.84.88:1080",
    "http://72.10.160.171:18963",
    "http://67.43.228.253:20009",
    "http://67.43.227.226:12783",
    "http://67.43.228.254:18835",
    "http://67.43.236.20:10757",
    "http://147.75.92.251:9443",
    "http://72.10.160.90:18655",
    "http://188.166.197.129:3128",
    "http://67.43.227.227:28681",
    "http://47.90.205.231:33333",
    "http://67.43.227.227:22945",
    "http://116.203.15.29:3128",
    "http://67.43.228.252:15469",
    "http://72.10.160.90:29445",
    "http://72.10.160.172:29907",
    "http://112.19.241.37:19999",
    "http://67.43.236.18:18003",
    "http://103.18.77.50:1111",
    "http://72.10.160.170:30817",
    "http://128.199.254.13:9090",
    "http://67.43.227.227:17311",
    "http://72.10.164.178:15933",
    "http://67.43.236.20:19567",
    "http://67.43.236.20:6269",
    "http://67.43.227.230:27371",
    "http://154.236.191.52:1976",
    "http://116.202.113.187:60289",
    "http://72.10.160.170:22667",
    "http://60.217.33.47:9999",
    "http://72.10.160.90:1707",
    "http://72.10.164.178:25069",
    "http://72.10.160.90:17931",
    "http://67.43.227.227:13093",
    "http://67.43.227.227:26341",
    "http://72.10.160.170:5241",
    "http://67.43.228.251:12223",
    "http://72.10.164.178:21217",
    "http://186.159.116.22:3128",
    "http://67.43.228.251:20147",
    "http://67.43.228.251:31935",
    "http://114.130.153.122:58080",
    "http://190.8.164.64:999",
    "http://67.43.228.250:5677",
    "http://116.80.47.14:3128",
    "http://72.10.160.90:2953",
    "http://202.180.20.11:55443",
    "http://67.43.227.227:29373",
    "http://103.247.22.79:8080",
    "http://177.234.240.124:1993",
    "http://67.43.236.20:11495",
    "http://72.10.160.171:12715",
    "http://72.10.160.91:20831",
    "http://67.43.227.227:1871",
    "http://67.43.227.229:11947",
    "http://103.162.54.251:8080",
    "http://161.34.40.116:3128",
    "http://161.34.40.32:3128",
    "http://67.43.228.253:16619",
    "http://67.43.236.18:8731",
    "http://14.241.205.40:8080",
    "http://67.43.227.227:8755",
    "http://67.43.227.227:5619",
    "http://67.43.236.20:32383",
    "http://67.43.227.226:28851",
    "http://111.1.61.47:3128",
    "http://67.43.227.227:12783",
    "http://147.45.73.176:8443",
    "http://161.34.40.112:3128",
    "http://92.45.196.83:3310",
    "http://87.97.60.4:18080",
    "http://200.10.30.217:8083",
    "http://34.124.190.108:8090",
    "http://85.117.60.133:8080",
    "http://94.23.171.143:50001",
    "http://103.127.97.187:3128",
    "http://5.2.228.168:8888",
    "http://165.155.228.15:9400",
    "http://67.43.227.226:7021",
    "http://116.107.111.51:5020",
    "http://49.48.89.155:8080",
    "http://103.148.25.201:8080",
    "http://36.77.233.188:8080",
    "http://45.174.79.95:999",
    "http://129.226.193.16:3128",
    "http://1.1.226.191:8080",
    "http://27.76.201.251:5101",
    "http://72.10.164.178:15825",
    "http://162.240.154.26:3128",
    "http://67.43.228.250:1871",
    "http://72.10.160.93:1879",
    "http://2.179.193.146:3128",
    "http://116.202.113.187:60211",
    "http://103.245.205.226:6969",
    "http://102.214.165.241:1981",
    "http://72.10.160.173:29907",
    "http://72.10.160.90:13863",
    "http://36.93.217.223:8080",
    "http://72.10.160.90:14997",
    "http://67.43.228.253:10145",
    "http://72.10.164.178:31585",
    "http://72.10.160.172:1333",
    "http://110.77.180.64:80",
    "http://41.65.55.10:1981",
    "http://45.76.122.178:80",
    "http://103.209.36.58:81",
    "http://67.43.227.226:18479",
    "http://148.251.250.57:8080",
    "http://67.43.228.250:12295",
    "http://177.87.15.141:8081",
    "http://95.31.5.29:54651",
    "http://120.55.183.157:3129",
    "http://67.43.236.20:7457",
    "http://67.43.228.250:19943",
    "http://72.10.160.90:14583",
    "http://161.34.40.110:3128",
    "http://72.10.160.90:27521",
    "http://36.92.162.220:8080",
    "http://72.10.160.93:30287",
    "http://72.10.160.173:7895",
    "http://72.10.160.90:16109",
    "http://67.43.236.22:23067",
    "http://37.120.192.154:8080",
    "http://67.43.227.227:23191",
    "http://177.12.107.167:443",
    "http://67.43.236.18:32383",
    "http://193.233.84.131:1080",
    "http://176.215.1.25:3128",
    "http://72.10.160.173:15535",
    "http://171.238.239.231:5000",
    "http://119.47.90.240:1111",
    "http://72.10.164.178:6653",
    "http://103.124.198.118:8080",
    "http://66.206.15.148:8138",
    "http://103.88.236.113:84",
    "http://165.155.229.12:9480",
    "http://103.176.96.178:1111",
    "http://165.155.229.8:9400",
    "http://103.166.159.163:8080",
    "http://103.133.223.20:8080",
    "http://13.40.239.130:80",
    "http://38.97.215.145:8080",
    "http://66.96.235.34:8080",
    "http://72.10.160.90:22397",
    "http://67.43.236.20:10981",
    "http://104.248.151.93:9090",
    "http://122.3.77.27:8082",
    "http://45.70.201.186:999",
    "http://67.43.236.20:15867",
    "http://189.124.85.77:33333",
    "http://67.43.236.19:28535",
    "http://202.47.188.133:8090",
    "http://180.191.254.10:8081",
    "http://188.132.222.52:8080",
    "http://150.136.4.250:3128",
    "http://88.119.139.237:53281",
    "http://38.45.44.109:999",
    "http://103.172.254.145:84",
    "http://31.133.0.163:33033",
    "http://52.26.114.229:1080",
    "http://103.158.121.66:1080",
    "http://103.48.68.218:83",
    "http://103.165.156.148:8090",
    "http://103.67.237.214:3128",
    "http://49.48.52.47:8080",
    "http://171.228.119.39:10089",
    "http://181.114.224.37:8080",
    "http://185.237.85.233:8080",
    "http://36.37.163.254:8080",
    "http://187.62.191.3:61456",
    "http://49.0.3.173:8080",
    "http://103.153.62.246:8181",
    "http://103.122.1.42:8181",
    "http://103.189.123.110:8080",
    "http://72.10.160.174:26131",
    "http://103.147.246.185:3127",
    "http://95.31.22.44:7777",
    "http://161.34.40.113:3128",
    "http://72.10.160.170:17759",
    "http://103.180.196.141:8080",
    "http://179.189.236.201:20183",
    "http://121.101.133.220:8080",
    "http://80.87.178.175:8080",
    "http://144.86.187.58:3129",
    "http://65.20.189.104:9090",
    "http://95.153.205.147:8424",
    "http://103.164.117.186:3128",
    "http://103.247.23.33:1111",
    "http://173.249.60.246:14344",
    "http://72.10.164.178:16867",
    "http://182.253.7.146:8180",
    "http://198.99.81.198:8080",
    "http://202.29.222.254:8080",
    "http://116.107.217.134:10052",
    "http://41.60.157.209:8080",
    "http://85.117.63.37:8080",
    "http://177.234.245.231:999",
    "http://195.191.158.172:80",
    "http://67.43.227.226:7147",
    "http://193.227.129.213:34587",
    "http://177.37.217.45:8080",
    "http://38.156.73.204:8080",
    "http://101.251.204.174:8080",
    "http://119.95.250.42:8082",
    "http://103.191.58.14:8080",
    "http://103.187.111.81:84",
    "http://201.134.169.214:8204",
    "http://103.151.247.235:7777",
    "http://177.234.236.134:8080",
    "http://103.247.23.198:8080",
    "http://188.132.222.49:8080",
    "http://124.83.51.94:8082",
    "http://147.28.155.23:9443",
    "http://116.202.217.96:1080",
    "http://128.199.113.85:9090",
    "http://67.43.227.227:26839",
    "http://72.10.160.171:11481",
    "http://85.172.15.98:80",
    "http://186.24.9.204:9898",
    "http://116.80.47.21:3128",
    "http://181.114.61.17:8085",
    "http://189.195.139.178:999",
    "http://161.34.40.35:3128",
    "http://67.43.228.254:24045",
    "http://180.191.59.109:8082",
    "http://36.67.8.169:8080",
    "http://122.152.4.135:6000",
    "http://161.34.40.117:3128",
    "http://36.91.135.141:40",
    "http://103.87.148.40:1111",
    "http://103.169.133.22:8085",
    "http://103.147.30.65:3128",
    "http://124.6.168.26:80",
    "http://92.60.190.79:3128",
    "http://31.7.70.215:3128",
    "http://209.146.18.230:8082",
    "http://103.191.115.238:83",
    "http://202.152.24.50:8080",
    "http://180.191.23.149:8082",
    "http://39.62.4.164:8080",
    "http://45.174.78.244:999",
    "http://116.80.47.24:3128",
    "http://119.110.71.161:63123",
    "http://43.153.208.148:3128",
    "http://103.164.235.13:8085",
    "http://146.196.41.141:8080",
    "http://45.174.57.22:999",
    "http://154.236.177.105:1976",
    "http://67.43.227.229:32737",
    "http://128.199.187.46:9090",
    "http://161.34.40.109:3128",
    "http://41.233.38.200:8080",
    "http://67.43.228.251:5101",
    "http://38.7.3.13:999",
    "http://181.205.28.69:46380",
    "http://103.122.0.114:8181",
    "http://138.2.64.185:8118",
    "http://163.172.33.137:4137",
    "http://190.53.46.11:38525",
    "http://103.155.198.93:8181",
    "http://112.78.47.188:8080",
    "http://67.43.236.18:27427",
    "http://103.167.168.33:5040",
    "http://103.174.237.66:3127",
    "http://190.97.236.40:2023",
    "http://72.10.164.178:14005",
    "http://67.43.227.227:22915",
    "http://38.52.208.3:999",
    "http://103.18.232.153:8085",
    "http://120.28.189.82:8181",
    "http://67.43.228.254:14941",
    "http://181.188.238.147:999",
    "http://103.148.130.107:8080",
    "http://103.76.149.102:8181",
    "http://27.107.114.186:8080",
    "http://103.36.10.110:8090",
    "http://88.255.102.24:8080",
    "http://195.154.43.189:65304",
    "http://5.166.47.95:8080",
    "http://181.78.95.40:999",
    "http://182.52.229.165:8080",
    "http://103.162.55.42:8080",
    "http://103.203.233.105:3125",
    "http://165.16.5.53:1981",
    "http://154.0.14.116:3128",
    "http://103.111.207.138:80",
    "http://67.43.227.226:5181",
    "http://155.138.218.57:8118",
    "http://201.71.2.249:999",
    "http://103.131.18.194:8080",
    "http://125.99.106.250:3128",
    "http://212.110.188.193:34409",
    "http://102.0.9.138:32650",
    "http://200.76.42.203:999",
    "http://45.227.195.121:8082",
    "http://103.162.16.47:8080",
    "http://193.227.129.214:34681",
    "http://82.129.135.152:1976",
    "http://86.101.159.147:18080",
    "http://186.225.108.43:8080",
    "http://144.86.187.34:3129",
    "http://144.86.187.38:3129",
    "http://181.39.24.147:999",
    "http://103.125.174.27:8080",
    "http://103.165.155.243:2016",
    "http://181.78.94.23:9991",
    "http://120.28.76.192:8082",
    "http://72.10.160.91:29135",
    "http://103.153.246.46:8080",
    "http://103.109.59.179:9080",
    "http://157.20.157.5:8080",
    "http://190.8.164.24:8086",
    "http://45.177.179.65:999",
    "http://103.161.162.14:8080",
    "http://103.151.35.165:1111",
    "http://14.177.236.212:55443",
    "http://161.34.40.33:3128",
    "http://161.34.40.36:3128",
    "http://103.143.8.126:8089",
    "http://168.194.248.18:8080",
    "http://171.238.236.69:5000",
    "http://67.43.228.254:30831",
    "http://27.147.155.42:58080",
    "http://81.91.139.76:8080",
    "http://182.160.123.113:5020",
    "http://45.175.239.8:999",
    "http://165.225.230.170:9401",
    "http://1.10.133.110:8080",
    "http://103.46.4.101:8080",
    "http://109.201.14.82:8080",
    "http://111.1.61.49:3128",
    "http://103.168.254.219:1111",
    "http://182.160.103.220:8090",
    "http://39.101.183.194:3128",
    "http://103.125.174.23:8181",
    "http://27.72.141.201:10063",
    "http://188.72.43.217:47193",
    "http://185.82.98.73:99",
    "http://123.108.66.149:8080",
    "http://85.185.201.163:8080",
    "http://190.69.157.215:999",
    "http://173.212.216.227:8118",
    "http://161.34.40.114:3128",
    "http://188.125.169.39:9999",
    "http://1.1.226.191:80",
    "http://131.0.207.134:8080",
    "http://129.222.202.169:80",
    "http://109.238.181.53:8083",
    "http://103.105.76.10:3125",
    "http://103.111.136.110:8081",
    "http://45.22.209.157:8888",
    "http://103.176.96.232:8082",
    "http://67.43.227.228:1597",
    "http://103.93.193.141:58080",
    "http://67.43.227.226:4189",
    "http://103.217.217.106:8080",
    "http://5.104.83.232:8090",
    "http://177.93.59.71:999",
    "http://200.94.96.174:999",
    "http://210.61.207.92:80",
    "http://203.176.129.85:8080",
    "http://103.169.131.50:8080",
    "http://223.135.156.183:8080",
    "http://176.241.143.197:8080",
    "http://172.104.46.119:3128",
    "http://103.171.240.174:8080",
    "http://125.26.108.122:8080",
    "http://181.78.94.158:999",
    "http://212.252.71.9:8080",
    "http://103.175.238.174:8080",
]
get_proxies_listv3(proxies_list, url)
# get_proxies_listv2(url)
# get_proxies_listv1(url)
