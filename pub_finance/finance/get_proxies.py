import requests
import math
from lxml import html
import random
import logging
import sys
import uuid
import json
import time
import pandas as pd
from utility.toolkit import ToolKit

logging.basicConfig(
    stream=sys.stdout,
    level=logging.INFO,
    format="%(asctime)s - %(levelname)s - %(message)s",
)
logger = logging.getLogger(__name__)

# https://www.useragents.me/#most-common-desktop-useragents-json-csv 获取最新user agent
user_agent_list = [
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.3",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.3",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.3",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:129.0) Gecko/20100101 Firefox/129.",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 Edg/126.0.0.",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36 OPR/112.0.0.",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36 Edg/127.0.0.",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36 Edg/124.0.0.",
    "Mozilla/5.0 (X11; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/113.",
    "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:129.0) Gecko/20100101 Firefox/129.",
    "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.3",
    "Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.14"
    "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.10",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.3",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36",
]

headers = {
    "User-Agent": random.choice(user_agent_list),
    "Referer": "sh.ke.com",
    "Host": "sh.ke.com",
    "Connection": "keep-alive",
    "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
    "Accept-encoding": "gzip, deflate, br, zstd",
    "Accept-language": "zh-CN,zh;q=0.9",
    "Cookie": ("ke_uuid=%s;") % (uuid.uuid4()),
}


def check_proxy_anonymity(url, headers, proxy):
    try:
        s = requests.Session()
        s.proxies = proxy
        s.headers.update(headers)
        response = s.get(url, timeout=3)
        if response.status_code == 200:
            tree = html.fromstring(response.content)
            div = tree.xpath(
                '//div[@class="xiaoquListPage"]/div[@class="content"]/div[@class="leftContent"]/div[@class="resultDes clear"]/h2[@class="total fl"]/span'
            )
            if div:
                cnt = div[0].text_content().strip()
                page_no = math.ceil(int(cnt) / 30)
                print("当前获取房源量为%s,总页数为%s" % (cnt, page_no))
                print("proxy %s有效" % (proxy))
                return True
            else:
                print("proxy无效")
                return False
        else:
            print(f"Failed to retrieve data: {response.status_code}")
            return False

    except requests.exceptions.RequestException as e:
        print(f"{proxy}: {e}")
        return False
    except Exception as e:
        print(f"发生了未知错误: {e}")
        return False


# ZDY: https://api.openproxylist.xyz/http.txt
def get_proxies_listv1(url):
    proxy_url = "https://api.openproxylist.xyz/http.txt"
    count = 0
    dlist = []
    target = 1
    while count < target:
        s = requests.session()
        response = s.get(proxy_url, timeout=3)
        if response.status_code == 200:
            proxy_list = [
                "http://" + proxy
                for proxy in response.content.decode("utf-8").strip().split("\n")
            ]
            for item in proxy_list:
                proxy = {"https": item, "http": item}
                # proxy = {"https": item}
                if check_proxy_anonymity(url, headers, proxy):
                    dlist.append(item)
                    count = count + 1
                if count == target:
                    break
            break
        else:
            print("proxy get failed..")
            break
    print(dlist)


# https://getproxy.bzpl.tech/get/
def get_proxies_listv2(url):
    proxy_url = "https://getproxy.bzpl.tech/get/"
    count = 0
    dlist = []
    target = 1
    while count < target:
        s = requests.session()
        time.sleep(random.randint(1, 3))  # 随机休眠
        response = s.get(proxy_url, timeout=3)
        if response.status_code == 200:
            json_str = response.content.decode("utf-8")
            json_data = json.loads(json_str)
            proxy = {
                "https": "http://" + json_data["proxy"],
                "http": "http://" + json_data["proxy"],
            }
            if check_proxy_anonymity(url, headers, proxy):
                dlist.append("http://" + json_data["proxy"])
                count = count + 1
    print(dlist)


# 使用示例
# proxyscrape.com免费proxy: https://api.proxyscrape.com/v3/free-proxy-list/get?request=displayproxies&country=cn&protocol=http&proxy_format=protocolipport&format=text&anonymity=Elite,Anonymous&timeout=3000
# 站大爷免费proxy: https://www.zdaye.com/free/?ip=&adr=&checktime=&sleep=3&cunhuo=&dengji=&nadr=&https=1&yys=&post=&px=


def get_proxies_listv3(proxies_list, url):
    dlist = []
    t1 = ToolKit("检验中......")
    df = pd.read_csv("./houseinfo/proxies.csv", names=["proxy"], comment="#")
    pre_proxies = df["proxy"].tolist()
    for idx, item in enumerate(proxies_list):
        proxy = {"https": item, "http": item}
        if check_proxy_anonymity(url, headers, proxy):
            if item not in pre_proxies:
                print("item: %s" % (item))
                df_result = pd.DataFrame([item])
                df_result.to_csv(
                    "./houseinfo/proxies.csv", mode="a", header=False, index=False
                )
                pre_proxies.append(item)
                dlist.append(item)
        t1.progress_bar(len(proxies_list), idx)

    print(dlist)


# url = "http://sh.lianjia.com/xiaoqu/xuhui/pgpgnobp0ep100/"
url = "http://sh.ke.com/xiaoqu/xuhui/pg1cro21/"
proxies_list = [
    "http://163.172.31.44:80",
    "http://51.159.159.73:80",
    "http://136.226.194.151:9480",
    "http://45.159.249.247:3128",
    "http://31.133.0.163:33033",
    "http://52.56.53.70:8082",
    "http://165.155.228.17:9480",
    "http://165.155.228.10:9480",
    "http://165.155.228.18:9480",
    "http://165.155.229.11:9480",
    "http://165.155.229.13:9480",
    "http://165.155.229.11:9400",
    "http://165.155.228.13:9480",
    "http://165.155.228.13:9400",
    "http://165.155.228.10:9400",
    "http://165.155.230.10:9480",
    "http://165.155.229.13:9400",
    "http://165.155.230.12:9400",
    "http://165.155.228.19:9480",
    "http://165.155.228.11:9400",
    "http://165.155.230.13:9400",
    "http://165.155.230.13:9480",
    "http://165.155.229.10:9480",
    "http://165.155.229.9:9480",
    "http://165.155.229.9:9400",
    "http://165.155.229.12:9400",
    "http://165.155.228.16:9400",
    "http://165.155.230.11:9480",
    "http://165.155.228.18:9400",
    "http://165.155.228.19:9400",
    "http://165.155.230.9:9400",
    "http://165.155.230.9:9480",
    "http://165.155.230.8:9400",
    "http://165.155.228.16:9480",
    "http://165.155.228.8:9480",
    "http://165.155.228.15:9400",
    "http://165.155.228.14:9480",
    "http://165.155.230.11:9400",
    "http://194.68.171.247:3128",
    "http://165.155.229.12:9480",
    "http://165.155.228.15:9480",
    "http://165.155.228.12:9400",
    "http://165.155.228.12:9480",
    "http://165.155.229.10:9400",
    "http://165.155.228.9:9480",
    "http://165.155.229.8:9480",
    "http://165.155.228.11:9480",
    "http://165.155.230.12:9480",
    "http://165.155.230.10:9400",
    "http://165.155.228.8:9400",
    "http://165.155.230.8:9480",
    "http://185.253.32.26:8080",
    "http://92.60.190.79:3128",
    "http://154.73.28.157:8080",
    "http://165.155.228.14:9400",
    "http://92.51.126.42:8080",
    "http://194.5.25.34:443",
    "http://185.116.236.104:9595",
    "http://45.119.133.218:3128",
    "http://148.113.1.131:3128",
    "http://174.138.176.78:44024",
    "http://103.178.3.59:8181",
    "http://104.248.151.93:9090",
    "http://165.155.229.8:9400",
    "http://188.166.197.129:3128",
    "http://185.116.236.104:3128",
    "http://165.155.228.9:9400",
    "http://189.151.19.230:999",
    "http://67.43.227.227:18663",
    "http://103.132.53.229:8080",
    "http://67.43.227.226:7481",
    "http://220.184.127.125:3128",
    "http://218.60.0.220:80",
    "http://123.126.158.50:80",
    "http://152.42.170.225:9090",
    "http://148.251.86.68:16379",
    "http://8.153.12.119:3128",
    "http://160.86.242.23:8080",
    "http://35.73.28.87:3128",
    "http://67.43.228.251:24437",
    "http://182.253.109.192:8080",
    "http://128.199.187.46:9090",
    "http://27.109.125.195:443",
    "http://152.42.170.187:9090",
    "http://103.133.223.20:8080",
    "http://111.26.37.226:10011",
    "http://128.199.254.13:9090",
    "http://103.69.20.41:58080",
    "http://111.26.37.239:10003",
    "http://128.199.253.195:9090",
    "http://187.102.36.15:3128",
    "http://189.232.97.26:8080",
    "http://60.217.33.47:9999",
    "http://154.55.245.96:3128",
    "http://103.182.213.65:8080",
    "http://77.242.98.39:8080",
    "http://128.199.187.36:9090",
    "http://67.43.227.227:25081",
    "http://114.129.2.82:8080",
    "http://72.10.160.173:18111",
    "http://152.70.235.185:9002",
    "http://128.199.118.49:9090",
    "http://128.199.119.67:9090",
    "http://78.189.212.252:3310",
    "http://67.43.236.18:22857",
    "http://186.159.116.22:3128",
    "http://67.43.227.226:16507",
    "http://67.43.227.227:12823",
    "http://67.43.236.20:26231",
    "http://67.43.236.21:8559",
    "http://67.43.236.21:13379",
    "http://201.77.48.147:8080",
    "http://67.43.227.230:21459",
    "http://45.174.95.221:999",
    "http://67.43.236.20:1755",
    "http://128.199.113.85:9090",
    "http://179.96.28.58:80",
    "http://103.156.15.241:8080",
    "http://38.180.154.4:3128",
    "http://72.10.164.178:23319",
    "http://72.10.160.90:5283",
    "http://103.167.5.14:8080",
    "http://116.202.113.187:60892",
    "http://95.216.208.103:8118",
    "http://72.10.160.170:3845",
    "http://103.174.238.98:3127",
    "http://112.19.241.37:19999",
    "http://72.10.160.170:11969",
    "http://178.48.68.61:18080",
    "http://67.43.227.227:27931",
    "http://72.10.160.171:9253",
    "http://72.10.160.171:26955",
    "http://162.240.154.26:3128",
    "http://18.181.154.135:8888",
    "http://27.72.141.201:10085",
    "http://189.125.109.66:3128",
    "http://72.10.160.93:20577",
    "http://103.147.247.38:8181",
    "http://121.41.67.116:8080",
    "http://67.43.227.227:1995",
    "http://72.10.160.170:13909",
    "http://47.108.217.224:443",
    "http://144.76.42.215:8118",
    "http://72.10.160.174:20249",
    "http://116.202.113.187:60874",
    "http://72.10.160.90:15193",
    "http://46.161.194.88:8085",
    "http://72.10.160.91:8243",
    "http://72.10.160.170:19287",
    "http://67.43.227.227:7987",
    "http://72.10.160.173:21355",
    "http://72.10.160.170:27747",
    "http://78.188.230.238:3310",
    "http://103.156.248.45:8080",
    "http://67.43.227.227:29249",
    "http://161.49.87.222:8095",
    "http://67.43.236.20:13733",
    "http://72.10.160.171:3847",
    "http://72.10.160.90:12361",
    "http://203.115.124.75:8080",
    "http://128.199.121.61:9090",
    "http://37.210.165.14:8080",
    "http://203.138.144.132:3128",
    "http://72.10.160.171:15035",
    "http://157.15.80.20:7777",
    "http://67.43.236.20:12541",
    "http://72.10.160.170:10831",
    "http://116.202.113.187:60217",
    "http://49.0.3.130:8090",
    "http://103.191.58.60:8080",
    "http://181.204.81.178:999",
    "http://46.149.251.225:54486",
    "http://181.209.81.82:999",
    "http://216.173.71.126:3128",
    "http://38.7.30.129:999",
    "http://120.50.18.146:58080",
    "http://72.10.160.94:30705",
    "http://67.43.228.251:15205",
    "http://209.146.18.230:8082",
    "http://67.43.227.227:18845",
    "http://88.248.113.25:3310",
    "http://72.10.160.92:17749",
    "http://113.16.209.116:10010",
    "http://41.65.55.27:1981",
    "http://72.10.160.172:25863",
    "http://27.147.175.115:8080",
    "http://107.189.8.240:8080",
    "http://38.52.208.6:999",
    "http://102.129.33.33:8080",
    "http://88.225.212.143:3310",
    "http://45.236.105.81:999",
    "http://95.154.20.113:34248",
    "http://112.198.200.136:8082",
    "http://67.43.236.20:28681",
    "http://185.138.120.109:8080",
    "http://103.48.68.218:83",
    "http://72.10.164.178:25871",
    "http://103.165.155.129:1111",
    "http://61.129.2.212:8080",
    "http://72.10.160.90:1733",
    "http://45.70.238.22:999",
    "http://67.43.227.227:27651",
    "http://189.204.244.178:999",
    "http://116.107.217.134:10067",
    "http://34.97.149.238:8561",
    "http://103.203.233.105:3125",
    "http://38.57.232.46:999",
    "http://67.43.227.227:16143",
    "http://72.10.164.178:3381",
    "http://194.87.208.192:3128",
    "http://103.175.46.218:3125",
    "http://4.234.106.25:8118",
    "http://103.165.155.109:1111",
    "http://103.165.155.105:1111",
    "http://103.82.126.202:8080",
    "http://45.238.118.156:27234",
    "http://213.97.158.42:3128",
    "http://67.43.228.253:17267",
    "http://72.10.164.178:2751",
    "http://103.156.16.243:8080",
    "http://103.90.67.35:8080",
    "http://102.222.252.182:9999",
    "http://189.89.188.14:2020",
    "http://103.48.68.75:82",
    "http://45.81.144.13:8080",
    "http://103.106.112.123:8080",
    "http://14.170.154.193:19132",
    "http://147.75.92.251:9443",
    "http://181.21.168.161:999",
    "http://190.205.40.94:3128",
    "http://103.78.215.253:8080",
    "http://116.80.47.13:3128",
    "http://78.187.15.92:3310",
    "http://43.249.224.170:83",
    "http://72.10.160.94:11997",
    "http://84.53.245.42:41258",
    "http://151.22.181.211:8080",
    "http://161.34.36.13:3128",
    "http://14.242.25.180:8080",
    "http://72.10.160.90:5673",
    "http://180.211.162.146:8080",
    "http://41.254.56.34:1981",
    "http://103.179.84.50:8080",
    "http://103.122.0.115:8181",
    "http://67.43.227.226:10127",
    "http://45.174.80.83:20183",
    "http://47.90.205.231:33333",
    "http://38.183.144.117:1111",
    "http://212.174.242.114:8080",
    "http://103.169.133.42:8080",
    "http://138.0.207.3:8085",
    "http://103.83.198.169:8080",
    "http://67.43.227.226:27651",
    "http://148.251.86.76:16379",
    "http://94.182.40.51:3128",
    "http://103.165.222.190:8080",
    "http://144.86.187.41:3129",
    "http://102.220.127.140:8080",
    "http://122.185.180.190:32650",
    "http://217.24.245.58:8079",
    "http://46.161.194.65:1976",
    "http://103.106.195.41:32650",
    "http://116.80.47.29:3128",
    "http://101.255.210.2:1111",
    "http://67.43.228.252:30679",
    "http://58.147.190.145:8181",
    "http://119.47.90.228:3127",
    "http://38.52.220.171:999",
    "http://103.9.188.228:8080",
    "http://67.43.227.227:10111",
    "http://186.215.87.194:30024",
    "http://105.21.72.38:8080",
    "http://36.88.140.196:8083",
    "http://212.252.73.29:8080",
    "http://20.13.34.208:8118",
    "http://111.125.242.34:1111",
    "http://186.215.87.194:30011",
    "http://41.209.10.194:8080",
    "http://212.110.188.195:34411",
    "http://38.50.165.54:999",
    "http://103.163.226.253:3125",
    "http://67.43.227.226:1557",
    "http://116.80.47.24:3128",
    "http://72.10.160.90:10041",
    "http://72.10.160.92:30679",
    "http://144.86.187.42:3129",
    "http://103.175.46.222:3125",
    "http://138.204.154.189:11201",
    "http://41.209.10.205:8080",
    "http://36.90.50.199:8080",
    "http://67.43.236.21:7097",
    "http://116.107.217.134:10056",
    "http://103.158.162.18:8080",
    "http://175.137.10.254:8081",
    "http://103.215.207.34:84",
    "http://112.198.179.57:8082",
    "http://203.190.46.57:3128",
    "http://91.236.74.5:8080",
    "http://67.43.236.20:3221",
    "http://45.233.90.10:443",
    "http://182.253.10.21:8080",
    "http://103.48.69.54:83",
    "http://190.94.213.48:999",
    "http://45.81.144.45:8085",
    "http://72.10.160.173:14637",
    "http://185.19.4.22:3128",
    "http://67.43.228.250:15117",
    "http://138.0.231.202:999",
    "http://45.184.73.32:40033",
    "http://103.166.158.203:8090",
    "http://27.147.139.241:58080",
    "http://103.186.90.41:8080",
    "http://103.148.45.60:8833",
    "http://103.112.45.46:8080",
    "http://151.22.181.215:8080",
    "http://103.162.63.198:8181",
    "http://181.78.82.214:999",
    "http://84.244.119.36:23500",
    "http://212.252.73.23:8080",
    "http://79.106.229.118:8989",
    "http://116.107.217.134:10051",
    "http://67.43.228.250:20829",
    "http://103.88.90.54:8080",
    "http://181.57.171.254:8085",
    "http://202.93.244.54:8085",
    "http://103.165.156.171:8090",
    "http://36.93.130.219:66",
    "http://111.1.61.49:3128",
    "http://140.227.228.202:10101",
    "http://103.166.227.82:8085",
    "http://126.209.9.30:8080",
    "http://1.20.207.92:8080",
    "http://119.18.156.245:8080",
    "http://223.25.110.206:1080",
    "http://34.97.190.56:8561",
    "http://182.160.124.214:6969",
    "http://103.122.1.22:8181",
    "http://62.74.173.146:8080",
    "http://161.34.40.37:3128",
    "http://157.120.44.212:3128",
    "http://181.39.48.120:999",
    "http://103.182.212.201:6969",
    "http://131.221.43.249:8080",
    "http://180.94.12.137:8080",
    "http://103.99.136.42:8080",
    "http://36.88.111.98:55443",
    "http://79.143.177.29:21972",
    "http://177.234.247.234:999",
    "http://161.34.40.112:3128",
    "http://103.187.86.27:8182",
    "http://116.114.20.148:3128",
    "http://206.42.43.192:8080",
    "http://181.174.115.9:1994",
    "http://103.91.86.85:8080",
    "http://82.64.186.155:8080",
    "http://118.172.239.231:8180",
    "http://102.68.128.214:8080",
    "http://65.20.188.53:9090",
    "http://103.164.213.78:8088",
    "http://116.98.119.102:10057",
    "http://110.74.222.174:8082",
    "http://103.148.39.38:83",
    "http://168.197.182.137:8080",
    "http://103.159.90.42:84",
    "http://34.97.176.53:8561",
    "http://103.187.227.62:8080",
    "http://43.134.32.184:3128",
    "http://161.34.68.133:3128",
    "http://181.129.147.162:8080",
    "http://212.110.188.198:34405",
    "http://72.10.160.91:5283",
    "http://192.145.228.212:8081",
    "http://202.61.120.182:8080",
    "http://58.147.186.214:3125",
    "http://103.168.44.18:8080",
    "http://67.43.228.253:15693",
    "http://103.179.218.5:1080",
    "http://103.248.9.206:3127",
    "http://175.29.177.146:8080",
    "http://201.149.100.32:8085",
    "http://103.48.68.138:83",
    "http://67.43.236.20:24459",
    "http://45.174.57.26:999",
    "http://47.251.43.115:33333",
    "http://67.43.227.226:16143",
    "http://88.80.103.9:6888",
    "http://202.154.12.144:7777",
    "http://103.54.80.162:1111",
    "http://109.164.38.201:2306",
    "http://77.238.224.28:8080",
    "http://103.147.98.122:8080",
    "http://202.179.184.69:8080",
    "http://103.156.141.87:8080",
    "http://103.175.236.222:8080",
    "http://37.235.28.194:8080",
    "http://103.248.9.154:8080",
    "http://202.40.179.34:9090",
    "http://103.172.254.145:84",
    "http://12.163.95.129:8080",
    "http://45.171.146.183:8083",
    "http://45.230.169.6:999",
    "http://116.202.113.187:60458",
    "http://118.99.68.133:8080",
    "http://188.255.118.103:8080",
    "http://103.172.120.178:1111",
    "http://103.165.234.46:8080",
    "http://190.110.37.11:999",
    "http://41.70.12.206:8080",
    "http://103.171.245.14:8080",
    "http://43.153.208.148:3128",
    "http://194.124.36.250:8080",
    "http://201.168.199.7:999",
    "http://176.105.199.153:8010",
    "http://103.173.72.13:1111",
    "http://201.20.115.22:8080",
    "http://202.88.251.73:8080",
    "http://212.110.188.220:34409",
    "http://202.57.25.127:8080",
    "http://190.26.255.30:999",
    "http://103.88.90.53:8080",
    "http://181.205.74.98:21901",
    "http://67.43.227.227:24601",
    "http://94.142.137.203:9741",
    "http://102.67.101.250:8080",
    "http://200.94.102.11:999",
    "http://115.127.28.10:8674",
    "http://186.180.79.22:999",
    "http://188.132.222.247:8080",
    "http://88.255.102.13:8080",
    "http://103.163.244.52:83",
    "http://161.34.40.32:3128",
    "http://42.3.187.52:8080",
    "http://122.54.147.110:8082",
    "http://52.35.240.119:3128",
    "http://67.43.228.252:16697",
    "http://187.32.246.84:3128",
    "http://111.199.233.244:9000",
    "http://58.137.174.101:8080",
    "http://36.88.123.218:41890",
    "http://159.192.139.178:8080",
    "http://101.255.118.89:8080",
    "http://67.43.228.252:28363",
    "http://103.103.3.6:8080",
    "http://94.73.239.124:55443",
    "http://103.191.218.255:8087",
    "http://161.34.40.111:3128",
    "http://114.130.153.122:58080",
    "http://36.93.68.47:41890",
    "http://103.88.90.129:8080",
    "http://186.96.66.149:999",
    "http://138.0.228.120:8080",
    "http://165.16.27.105:1981",
    "http://103.84.176.98:8083",
    "http://182.160.105.46:14157",
    "http://122.50.6.186:80",
    "http://41.128.148.76:1981",
    "http://101.255.166.185:8080",
    "http://154.236.191.52:1981",
    "http://72.10.160.91:10609",
    "http://200.110.173.17:999",
    "http://161.34.40.116:3128",
    "http://67.43.228.251:25269",
    "http://103.186.91.39:8989",
    "http://103.42.120.31:8080",
    "http://177.39.139.14:9999",
    "http://38.156.72.18:8080",
    "http://41.128.148.76:1976",
    "http://94.228.240.240:8080",
    "http://102.215.198.97:1976",
    "http://160.19.231.226:8080",
    "http://103.156.140.203:8080",
    "http://203.190.46.99:8080",
    "http://154.236.168.176:1981",
    "http://103.46.10.100:8080",
    "http://67.43.227.230:10127",
    "http://181.10.181.107:999",
    "http://91.203.242.66:222",
    "http://103.48.68.220:83",
    "http://67.43.227.227:15849",
    "http://103.176.96.140:8082",
    "http://72.10.160.90:28897",
    "http://24.192.227.234:8080",
    "http://36.92.44.82:8080",
    "http://38.7.0.40:999",
    "http://193.192.124.74:8080",
    "http://67.43.227.226:27977",
    "http://45.229.56.64:999",
    "http://116.254.99.14:8080",
    "http://103.168.254.138:8086",
    "http://154.9.227.204:8080",
    "http://103.139.98.175:8080",
    "http://90.156.194.71:8080",
    "http://41.216.160.138:8082",
    "http://45.4.194.230:8080",
    "http://190.61.45.76:999",
    "http://157.100.9.236:999",
    "http://124.104.145.185:3128",
    "http://181.209.107.106:999",
    "http://103.169.133.22:8085",
    "http://157.100.57.184:999",
    "http://103.155.166.92:8181",
    "http://125.26.204.244:8080",
]
get_proxies_listv3(proxies_list, url)
# get_proxies_listv2(url)
# get_proxies_listv1(url)
